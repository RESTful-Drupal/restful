services:
  serializer.normalizer.entity_reference_item.restful:
    class: Drupal\restful\Normalizer\EntityReferenceItemNormalizer
    arguments: ['@rest.link_manager', '@serializer.entity_resolver']
    tags:
      - { name: normalizer, priority: 20 }
  serializer.normalizer.field_item.restful:
    class: Drupal\restful\Normalizer\FieldItemNormalizer
    tags:
      - { name: normalizer, priority: 20 }
  serializer.normalizer.field.restful:
    class: Drupal\restful\Normalizer\FieldNormalizer
    tags:
      - { name: normalizer, priority: 20 }
  serializer.normalizer.file_entity.restful:
    class: Drupal\restful\Normalizer\FileEntityNormalizer
    tags:
      - { name: normalizer, priority: 30 }
    arguments: ['@entity.manager', '@http_client', '@rest.link_manager', '@module_handler']
  serializer.normalizer.entity.restful:
    class: Drupal\restful\Normalizer\ContentEntityNormalizer
    arguments: ['@rest.link_manager', '@entity.manager', '@module_handler', '@request_stack']
    tags:
      - { name: normalizer, priority: 20 }
  serializer.encoder.restful:
    class: Drupal\restful\Encoder\JsonEncoder
    tags:
      - { name: encoder, priority: 20, format: 'hal_json' }
  restful.route_enhancer:
    class: Drupal\restful\Routing\RouteEnhancer
    tags:
      - { name: route_enhancer }
  restful.resource_routes:
    class: Drupal\restful\Routing\ResourceRoutes
    arguments: ['@plugin.manager.rest', '@entity_type.manager', '@logger.channel.rest']
    tags:
      - { name: 'event_subscriber' }
